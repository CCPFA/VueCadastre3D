"use strict";!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("itowns_widgets",[],o):"object"==typeof exports?exports.itowns_widgets=o():t.itowns_widgets=o()}(self,(function(){return(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[318],{58702:(t,o,e)=>{e.r(o),e.d(o,{Minimap:()=>g,Navigation:()=>m});var n=e(15671),i=e(43144),a=e(79340),r=e(82963),s=e(61120),c=e(95769);const l=(0,i.Z)((function t(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;(0,n.Z)(this,t),this.parentElement=e.parentElement||o.domElement,this.position=e.position||i.position,["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right"].includes(this.position)||(console.warn("'position' optional parameter for 'Widget' constructor is not a valid option. "+"It will be set to '".concat(i.position,"'.")),this.position=i.position),this.domElement=document.createElement("div"),this.parentElement.appendChild(this.domElement),this.domElement.style.width="".concat(e.width||e.size||i.width,"px"),this.domElement.style.height="".concat(e.height||e.size||i.height,"px");var a=this.position.split("-");if(this.domElement.classList.add("".concat(a[0],"-widget")),a[1])this.domElement.classList.add("".concat(a[1],"-widget"));else switch(a[0]){case"top":case"bottom":this.domElement.style.left="calc(50% - ".concat(this.domElement.offsetWidth/2,"px)");break;case"left":case"right":this.domElement.style.top="calc(50% - ".concat(this.domElement.offsetHeight/2,"px)")}e.translate&&(this.domElement.style.transform="translate(".concat(e.translate.x||0,"px, ").concat(e.translate.y||0,"px)"))}));var d={parentElement:document.body,displayCompass:!0,display3DToggle:!0,displayZoomIn:!0,displayZoomOut:!0,animationDuration:500,position:"bottom-left",direction:"column"};const m=function(t){(0,a.Z)(m,t);var o,e,l=(o=m,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(o);if(e){var i=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function m(t){var o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(this,m),["top","bottom","left","right"].includes(e.position)&&(console.warn("'position' optional parameter for 'Navigation' is not a valid option. "+"It will be set to '".concat(d.position,"'.")),e.position=d.position),(o=l.call(this,t,e,d)).direction=e.direction||d.direction,["column","row"].includes(o.direction)||(console.warn("'direction' optional parameter for 'Navigation' constructor is not a valid option. "+"It will be set to '".concat(d.direction,"'.")),o.direction=d.direction),o.animationDuration=void 0===e.animationDuration?d.animationDuration:e.animationDuration,o.domElement.id="widgets-navigation",o.domElement.classList.add("".concat(o.direction,"-widget")),(void 0===e.displayCompass?d.displayCompass:e.displayCompass)&&(o.compass=o.addButton("compass","",(function(){t.controls.lookAtCoordinate({heading:0,tilt:89.5,time:o.animationDuration})}),"widgets"),t.addEventListener(c.b.CAMERA_MOVED,(function(t){o.compass.style.transform="rotate(".concat(-t.heading,"deg)")}))),(void 0===e.display3DToggle?d.display3DToggle:e.display3DToggle)&&(o.switch3dButton=o.addButton("3d-button","3D",(function(){var e;e=t.controls.getTilt()<89?89.5:40,t.controls.lookAtCoordinate({tilt:e,time:o.animationDuration})})),t.addEventListener(c.b.CAMERA_MOVED,(function(t){o.switch3dButton.innerHTML=t.tilt<89?"2D":"3D"}))),(void 0===e.displayZoomIn?d.displayZoomIn:e.displayZoomIn)&&(o.zoomInButton=o.addButton("zoom-in-button",'<span class="widget-zoom-button-logo"></span>',(function(){t.controls.lookAtCoordinate({zoom:Math.min(20,t.controls.getZoom()+1),time:o.animationDuration})}),"zoom-button-bar")),(void 0===e.displayZoomOut?d.displayZoomOut:e.displayZoomOut)&&(o.zoomOutButton=o.addButton("zoom-out-button",'<span id="zoom-out-logo" class="widget-zoom-button-logo"></span>',(function(){t.controls.lookAtCoordinate({zoom:Math.max(3,t.controls.getZoom()-1),time:o.animationDuration})}),"zoom-button-bar")),o}return(0,i.Z)(m,[{key:"addButton",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3?arguments[3]:void 0,i=document.getElementById(n);i||(i=this.addButtonBar(n));var a=document.createElement("button");return a.className="widget-button",a.id=t,a.innerHTML=o,i.appendChild(a),a.addEventListener("click",e),a}},{key:"addButtonBar",value:function(t){var o=document.createElement("div");return o.className="widget-button-bar",t&&(o.id=t),this.domElement.appendChild(o),o}}]),m}(l);var u=e(60145),p=e(49469),f=e(48682),h=e(800);var v={minScale:2e-6,maxScale:2e-9,zoomRatio:1/30,width:150,height:150,position:"bottom-left"};const g=function(t){(0,a.Z)(l,t);var o,e,c=(o=l,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(o);if(e){var i=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function l(t,o){var e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((0,n.Z)(this,l),!t.isGlobeView)throw new Error("'Minimap' plugin only supports 'GlobeView'. Therefore, the 'view' parameter must be a 'GlobeView'.");if(!o.isColorLayer)throw new Error("'layer' parameter form 'Minimap' constructor should be a 'ColorLayer'.");if((e=c.call(this,t,i,v)).minScale=i.minScale||v.minScale,e.maxScale=i.maxScale||v.maxScale,e.zoomRatio=i.zoomRatio||v.zoomRatio,e.domElement.id="widgets-minimap",i.cursor){var a=document.createElement("div");a.id="cursor-wrapper",e.domElement.appendChild(a),"string"==typeof i.cursor?a.innerHTML=i.cursor:i.cursor instanceof HTMLElement&&a.appendChild(i.cursor)}e.view=new f.Z(e.domElement,o.source.extent,{camera:{type:h.P.ORTHOGRAPHIC},placement:o.source.extent,noControls:!0,maxSubdivisionLevel:t.tileLayer.maxSubdivisionLevel}),e.view.addLayer(o),t.domElement.focus(),e.domElement.addEventListener("pointerdown",(function(t){t.stopPropagation(),t.preventDefault()}));var r=e.view.camera.camera3D,s=e.view.getScale(i.pitch),d=r.zoom*e.maxScale/s,m=r.zoom*e.minScale/s,g=new u.Z(t.referenceCrs),y=new u.Z(e.view.referenceCrs),w=t.controls.getCameraTargetPosition();return t.addFrameRequester(p.Ao.AFTER_RENDER,(function(){var o=t.camera.camera3D.position.distanceTo(w),n=t.getScaleFromDistance(i.pitch,o);r.zoom=e.zoomRatio*m*n/e.minScale,r.zoom=Math.min(Math.max(r.zoom,d),m),r.updateProjectionMatrix(),g.setFromVector3(t.controls.getCameraTargetPosition()),g.as(e.view.referenceCrs,y),r.position.x=y.x,r.position.y=y.y,r.updateMatrixWorld(!0),e.view.notifyChange(r)})),e}return(0,i.Z)(l)}(l)}},t=>(58702,t(t.s=58702))])}));
//# sourceMappingURL=itowns_widgets.js.map